<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/default}">
<head>
<meta charset="utf-8">
<style type="text/css">
.container .table {
	text-align: center;
}

.container .table tbody tr:hover {
	background: #e3f2fd;
	cursor: pointer;
	text-decoration: underline;
}

.container .table thead tr td:first-child, .container .table thead tr td:last-child
	{
	width: 10%;
}

.container .table thead tr td:nth-child(2) {
	width: 40%;
}

.container .table thead tr td:nth-child(3), .container .table thead tr td:nth-child(4)
	{
	width: 20%;
}
</style>
</head>
<body layout:fragment="content">
	<div class="container">
		<div>
			<h2>게시판</h2>
		</div>
		<div>
			<div id="boardList">
				<label></label>
				<table class="table">
					<thead>
						<tr>
							<td>글번호</td>
							<td>제목</td>
							<td>작성자</td>
							<td>작성일자</td>
							<td>조회수</td>
						</tr>
					</thead>
					<tbody>
						<tr th:if="${boardList != null}" th:each="board : ${boardList}">
							<td th:text="${board.boardNo}"></td>
							<td th:text="${board.title}"></td>
							<td th:text="${board.writer}"></td>
							<td th:text="${board.registDate}"></td>
							<td th:text="${board.viewCnt}"></td>
						</tr>
					</tbody>
				</table>
				<ul class="pagination justify-content-center">
					<li class="page-item">
						<a class="page-link" th:onclick="javascript:printBoardList([[${pageInfo?.startPage}]])" href="#" aria-label="Previous">
							<span aria-hidden="true">&laquo;</span>
							<span class="sr-only">Previous</span>
						</a>
					</li>
					<li th:each="num : ${#numbers.sequence(1, pageInfo.endPage)}" class="page-item">
						<a class="page-link" th:text="${num}" href="#" th:onclick="javascript:printBoardList([[${num}]])"></a>
					</li>
					<li class="page-item">
						<a class="page-link" th:onclick="javascript:printBoardList([[${pageInfo?.endPage}]])" href="#" aria-label="Next">
							<span aria-hidden="true">&raquo;</span>
							<span class="sr-only">Next</span>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<script>
		var data = "";
		window.addEventListener('load', function() {
			printBoardList(1);
		});

		function printBoardList(page, perPage) {
			let pageNum = page;
			let pageSize = perPage;
			if (!perPage) {
				pageSize = 10;
			}
			$.ajax({
				url : 'board/list?page=' + pageNum + '&perPageNum=' + pageSize,
				method : 'GET'
			}).done(function(fragment) {
				console.log(fragment)
				$('#boardList').replaceWith(fragment);
			});
		}
	</script>
</body>
</html>